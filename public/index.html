<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hop Video Loop</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé¨</text></svg>">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header>
      <h1>Hop Video Loop</h1>
      <p class="subtitle">Diffusion en boucle sur Smart TV via AirPlay</p>
    </header>

    <!-- Server info banner -->
    <div id="server-info" class="info-banner hidden">
      <span class="info-icon">i</span>
      <div>
        <strong>Adresse r√©seau :</strong> <span id="network-url"></span>
        <br><small>Utilisez cette adresse si AirPlay ne d√©tecte pas la vid√©o</small>
      </div>
    </div>

    <!-- Main layout -->
    <div class="layout">
      <!-- Video list panel -->
      <aside id="video-list-panel">
        <div class="panel-header">
          <h2>Vid√©os</h2>
          <button id="refresh-btn" title="Rafra√Æchir la liste">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 2v6h-6M3 12a9 9 0 0 1 15-6.7L21 8M3 22v-6h6M21 12a9 9 0 0 1-15 6.7L3 16"/>
            </svg>
          </button>
        </div>
        <div id="video-list" class="video-list">
          <div class="loading-state">
            <div class="spinner"></div>
            <p>Chargement des vid√©os...</p>
          </div>
        </div>
      </aside>

      <!-- Player panel -->
      <main id="player-panel">
        <!-- Empty state -->
        <div id="empty-state" class="empty-state">
          <div class="empty-icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
          </div>
          <h3>S√©lectionnez une vid√©o</h3>
          <p>Choisissez une vid√©o dans la liste pour commencer la diffusion en boucle</p>
        </div>

        <!-- Download progress -->
        <div id="download-state" class="download-state hidden">
          <div class="download-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
            </svg>
          </div>
          <h3 id="download-title">T√©l√©chargement en cours...</h3>
          <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
          </div>
          <p id="download-info" class="download-info">0%</p>
        </div>

        <!-- Video player -->
        <div id="player-state" class="player-state hidden">
          <div class="video-container">
            <video
              id="video-player"
              playsinline
              loop
              autoplay
              x-webkit-airplay="allow"
              airplay="allow"
            ></video>
          </div>
          <div class="player-controls">
            <div class="now-playing">
              <span class="live-dot"></span>
              <span id="now-playing-name">-</span>
            </div>
            <div class="loop-stats">
              <div class="stat">
                <span class="stat-label">Boucles</span>
                <span id="loop-count" class="stat-value">0</span>
              </div>
              <div class="stat">
                <span class="stat-label">Dur√©e totale</span>
                <span id="total-time" class="stat-value">00:00:00</span>
              </div>
              <div class="stat">
                <span class="stat-label">Statut</span>
                <span id="play-status" class="stat-value status-waiting">En attente</span>
              </div>
            </div>
            <div class="player-actions">
              <button id="fullscreen-btn" class="action-btn" title="Plein √©cran">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
                </svg>
                Plein √©cran
              </button>
              <button id="stop-btn" class="action-btn action-btn-danger" title="Arr√™ter">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="6" y="6" width="12" height="12" rx="2"/>
                </svg>
                Arr√™ter
              </button>
            </div>
          </div>
          <!-- AirPlay instructions -->
          <div class="airplay-hint">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"/>
              <polygon points="12 15 17 21 7 21 12 15"/>
            </svg>
            <span>Pour diffuser sur TV : cliquez sur l'ic√¥ne AirPlay dans les contr√¥les vid√©o (Safari) ou utilisez le Cast (Chrome)</span>
          </div>
        </div>
      </main>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>
